<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>88별자리(IAU) 챌린지</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 게임 배경 및 폰트 설정 */
        body {
            font-family: 'Inter', sans-serif; /* Tailwind 기본 폰트 사용 */
            background-color: #1a202c; /* 어두운 배경 */
            color: #e2e8f0; /* 밝은 글씨 */
            display: flex;
            flex-direction: column; /* 컨텐츠를 세로로 쌓도록 변경 */
            align-items: center; /* 가로 중앙 정렬 */
            min-height: 100vh;
            padding: 20px; /* 모바일에서 여백 확보 */
            overflow-y: auto; /* 스크롤 추가 */
             /* 배경 이미지 설정 */
             background-image: url('https://i.ibb.co/CDP6Y4w/whisk-imageba432247bc93458997b3340081bb8.jpg');
             background-position: center;   /* 가운데 정렬 */
             background-repeat: repeat;  /* 이미지 반복 */
        }
        /* 게임 컨테이너 스타일 */
        .game-container {
            background-color: rgba(45, 55, 72, 0.9); /* 컨테이너 배경 (약간 투명하게) */
            padding: 30px;
            border-radius: 15px; /* 둥근 모서리 */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5); /* 그림자 */
            text-align: center;
            max-width: 700px; /* 타임어택 모드 그리드를 위해 너비 증가 */
            width: 100%; /* 모바일에서 전체 너비 사용 */
            margin-top: 20px; /* 상단 여백 */
            margin-bottom: 20px; /* 하단 여백 */
        }
        /* 문제 설명/학습 정보 스타일 */
        .description {
            font-size: 0.9rem; /* 폰트 크기 더 작게 */
            margin-bottom: 20px; /* 여백 조정 */
            min-height: 60px; /* 정보 영역 최소 높이 확보 */
            display: block;
            text-align: left;
            line-height: 1.6;
            overflow-y: auto;
            max-height: 600px; /* 최대 높이 600px로 설정 */
            padding-right: 10px;
            word-break: keep-all;
            white-space: normal;
            background-color: rgba(26, 32, 44, 0.7); /* 설명 영역 배경 */
            border-radius: 8px;
            padding: 10px;
        }

        /* 학습 정보 항목 제목 스타일 */
        .description strong {
            color: #9f7aea; /* 보라색 계열 */
            margin-right: 5px;
            display: inline;
            font-weight: bold;
        }

        /* 별자리 이름 표시 스타일 (학습 모드) */
        .constellation-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #63b3ed; /* 밝은 파란색 */
        }
        /* 버튼 그리드 스타일 (퀴즈 모드) */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* 반응형 그리드 */
            gap: 15px; /* 버튼 간 간격 */
            margin-bottom: 20px;
        }
        /* 네비게이션 버튼 컨테이너 (학습 모드) */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        /* 버튼 스타일 */
        .option-button, .mode-button, .nav-button, .next-quiz-button, .time-attack-button, #start-time-attack-game-button, #restart-time-attack-button {
            background-color: #4a5568; /* 버튼 배경 */
            color: #e2e8f0; /* 버튼 글씨 */
            padding: 12px 20px;
            border-radius: 8px; /* 둥근 모서리 */
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease, transform 0.1s ease; /* transform 추가 */
        }
        .option-button:hover, .mode-button:hover, .nav-button:hover, .next-quiz-button:hover, .time-attack-button:hover, #start-time-attack-game-button:hover, #restart-time-attack-button:hover {
            background-color: #636b7a; /* 호버 시 배경색 변경 */
        }
        .option-button:active, .mode-button:active, .nav-button:active, .next-quiz-button:active, .time-attack-button:active, #start-time-attack-game-button:active, #restart-time-attack-button:active {
            transform: scale(0.98); /* 클릭 시 약간 작아지는 효과 */
        }
        .mode-button.selected {
            background-color: #63b3ed; /* 선택된 모드 버튼 색상 */
            color: #1a202c;
            font-weight: bold;
        }
        /* 정답/오답 피드백 스타일 */
        .feedback {
            font-size: 1.1rem;
            font-weight: bold;
            min-height: 30px;
            margin-bottom: 20px;
        }
        .correct {
            color: #48bb78; /* 초록색 (정답) */
        }
        .incorrect {
            color: #f56565; /* 빨간색 (오답) */
        }
        /* 점수 스타일 */
        .score, .time-attack-stats {
            font-size: 1.1rem;
            margin-top: 20px;
            margin-bottom: 15px;
        }
        .time-attack-stats span {
            margin: 0 10px;
        }
        /* 숨김 처리 */
        .hidden {
            display: none !important; /* Important to override other display styles */
        }

        /* 학습 모드 별자리 목록 그리드 스타일 */
        .constellation-list-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
            max-height: 180px; /* 높이 줄임 (기존 250px) */
            overflow-y: auto;
            padding: 10px;
            background-color: rgba(45, 55, 72, 0.8); /* 배경 약간 투명하게 */
            border-radius: 8px;
        }

        /* 학습 모드 별자리 항목 스타일 */
        .constellation-list-item {
            background-color: #4a5568;
            color: #e2e8f0;
            padding: 6px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            text-align: center;
            transition: background-color 0.3s ease;
            line-height: 1.1;
        }

        .constellation-list-item:hover {
            background-color: #636b7a;
        }

        /* 학습 모드 이미지 스타일 */
        .constellation-image {
            max-width: 100%;
            height: auto;
            margin-top: 15px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.1); /* 이미지 로딩 중 배경 */
        }

        /* 타임어택 모드 그리드 스타일 */
        #time-attack-grid {
            display: grid;
            /* 열 개수는 JavaScript에서 동적으로 설정 */
            gap: 5px; /* 버튼 간 간격 줄임 */
            margin-bottom: 20px;
            max-height: 450px; /* 필요시 높이 조절 */
            overflow-y: auto;
        }

        .time-attack-button {
            padding: 8px 5px; /* 패딩 줄임 */
            font-size: 0.7rem; /* 폰트 크기 줄임 */
            text-overflow: ellipsis; /* 이름 길 경우 ... 처리 */
            overflow: hidden;
            white-space: nowrap;
            line-height: 1.2;
            min-height: 40px; /* 버튼 최소 높이 보장 */
            display: flex; /* Flexbox 사용하여 중앙 정렬 */
            align-items: center; /* 수직 중앙 정렬 */
            justify-content: center; /* 수평 중앙 정렬 */
        }

        .time-attack-button.solved {
            background-color: #48bb78; /* 정답 맞춘 버튼 (초록색) */
            color: #1a202c;
            font-weight: bold;
        }
        .time-attack-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        #time-attack-results {
            margin-top: 20px;
            font-size: 1.2rem;
            line-height: 1.8;
        }
        /* 타임어택 옵션 스타일 */
        #time-attack-options {
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(26, 32, 44, 0.8); /* 옵션 배경 약간 투명하게 */
            border-radius: 8px;
        }
        #time-attack-options fieldset {
            border: 1px solid #4a5568;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 6px;
        }
        #time-attack-options legend {
            font-weight: bold;
            color: #9f7aea;
            padding: 0 5px;
        }
        #time-attack-options label {
            margin-right: 15px;
            cursor: pointer;
        }
         #time-attack-options input[type="radio"] {
            margin-right: 5px;
            cursor: pointer;
        }
        /* 뮤직 플레이어 컨테이너 스타일 - 수정됨 */
        .game-audio-container {
            width: 100%;
            max-width: 700px; /* 게임 컨테이너와 동일한 최대 너비 */
            margin-top: 20px; /* 게임 컨테이너와의 간격 */
            display: flex; /* 추가: Flexbox 사용 */
            justify-content: center; /* 추가: 가로 중앙 정렬 */
        }

    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="text-2xl font-bold mb-6">88별자리(IAU) 챌린지</h1>

        <!-- 진행률 표시 추가 -->
        <div id="progress-bar" class="mb-4 hidden">
            <div class="bg-gray-700 rounded-full h-4 relative">
                <div id="progress-fill" class="bg-green-500 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                <span id="progress-text" class="absolute inset-0 flex items-center justify-center text-xs font-bold">0 / 88</span>
            </div>
        </div>

        <!-- 검색 기능 추가 -->
        <div id="search-container" class="mb-4 hidden">
            <input type="text" id="search-input" placeholder="별자리 검색..." 
                class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:border-blue-500">
        </div>

        <div id="mode-selection" class="mb-6">
            <button id="learn-mode-button" class="mode-button">학습 모드</button>
            <button id="quiz-mode-button" class="mode-button">퀴즈 모드</button>
            <button id="time-attack-mode-button" class="mode-button">타임어택 모드</button>
            <!-- 북마크 보기 버튼 추가 -->
            <button id="bookmark-view-button" class="mode-button">북마크</button>
        </div>

        <div id="constellation-name" class="constellation-name hidden"></div>
        <div id="constellation-list-grid" class="constellation-list-grid hidden"></div>
        <div id="description" class="description">
            원하는 모드를 선택하세요!
        </div>
        <div id="image-container" class="image-container hidden"></div>
        <div id="nav-buttons" class="nav-buttons hidden">
            <button id="prev-button" class="nav-button">이전</button>
            <button id="bookmark-button" class="nav-button">북마크</button>
            <button id="next-button" class="nav-button">다음</button>
        </div>

        <div id="options" class="options-grid hidden"></div>
        <button id="next-quiz-button" class="next-quiz-button hidden">다음 문제</button>
        <div id="feedback" class="feedback hidden"></div>
        <div id="score" class="score hidden">
            맞힌 개수: <span id="current-score">0 / 0</span> </div>

        <div id="time-attack-container" class="hidden">
            <div id="time-attack-options">
                <fieldset>
                    <legend>난이도 (갯수)</legend>
                    <label><input type="radio" name="difficulty" value="8" checked> Easy (8개)</label>
                    <label><input type="radio" name="difficulty" value="20"> Normal (20개)</label><br>
                    <label><input type="radio" name="difficulty" value="44"> Hard (44개)</label>
                    <label><input type="radio" name="difficulty" value="88"> All Clear (88개)</label>
                </fieldset>
                <fieldset>
                    <legend>언어 (버튼 이름)</legend>
                    <label><input type="radio" name="language" value="ko" checked> Korean</label>
                    <label><input type="radio" name="language" value="en"> English</label>
                </fieldset>
            </div>
            <button id="start-time-attack-game-button" class="mode-button mb-4">게임 시작</button>
            <div id="time-attack-game-area" class="hidden">
                <div id="time-attack-stats" class="time-attack-stats">
                    <span>시간: <span id="time-attack-timer">00:00</span></span>
                    <span>오답: <span id="time-attack-errors">0</span></span>
                    <span>남은 개수: <span id="time-attack-remaining">0</span></span> </div>
                <div id="time-attack-grid"></div>
            </div>
            <div id="time-attack-results" class="hidden"></div>
        </div>
    </div> <div class="game-audio-container mt-6"> <iframe
        src="https://suno.com/embed/7f025baa-4582-45a8-84b5-460cd4954fc1"
        width="270"
        height="90"
        frameborder="0"
        allow="autoplay; encrypted-media"
      ></iframe>
    </div>

    <script>
        // 사운드 효과 설정 - HTML5 Audio API를 사용한 간단한 사운드
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // 사운드 재생 함수
        function playSound(soundName) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const currentTime = audioContext.currentTime;
            
            switch(soundName) {
                case 'click':
                    oscillator.frequency.value = 800;
                    gainNode.gain.setValueAtTime(0.1, currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.1);
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + 0.1);
                    break;
                    
                case 'correct':
                    oscillator.frequency.value = 523.25; // C5
                    gainNode.gain.setValueAtTime(0.1, currentTime);
                    oscillator.frequency.setValueAtTime(523.25, currentTime);
                    oscillator.frequency.setValueAtTime(659.25, currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, currentTime + 0.2); // G5
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.3);
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + 0.3);
                    break;
                    
                case 'incorrect':
                    oscillator.frequency.value = 300;
                    gainNode.gain.setValueAtTime(0.1, currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.2);
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + 0.2);
                    break;
                    
                case 'complete':
                    oscillator.frequency.value = 523.25; // C5
                    gainNode.gain.setValueAtTime(0.1, currentTime);
                    oscillator.frequency.setValueAtTime(523.25, currentTime);
                    oscillator.frequency.setValueAtTime(659.25, currentTime + 0.15); // E5
                    oscillator.frequency.setValueAtTime(783.99, currentTime + 0.3); // G5
                    oscillator.frequency.setValueAtTime(1046.50, currentTime + 0.45); // C6
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + 0.6);
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + 0.6);
                    break;
            }
        }
        
        // 별자리 데이터 (기존과 동일)
        const constellations = [
            { name: "안드로메다자리 (Andromeda)", description: "안드로메다 은하를 포함하고 있으며, 카시오페이아자리 옆에 있습니다. 우리 은하와 가장 가까운 큰 은하인 안드로메다 은하(M31)가 이 별자리에 위치합니다. 가을철 북쪽 하늘에서 W 모양의 카시오페이아자리 옆에서 찾을 수 있습니다.", season: "가을~겨울", location: "북쪽 하늘", story: "에티오피아의 공주 안드로메다는 어머니 카시오페이아의 오만함 때문에 바다 괴물 케토스에게 제물로 바쳐질 운명이었습니다. 영웅 페르세우스에게 구출되어 그의 아내가 되었습니다.", characteristics: "안드로메다 은하 (M31), 카시오페이아자리 옆에 위치", imageUrl: "" },
            { name: "공기펌프자리 (Antlia)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 공기 펌프를 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 공기 펌프 상징", imageUrl: "" },
            { name: "극락조자리 (Apus)", description: "남반구의 작은 별자리입니다. 16세기 네덜란드 항해사들이 남반구의 새를 보고 만들었습니다.", season: "봄 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 새 상징", imageUrl: "" },
            { name: "물병자리 (Aquarius)", description: "황도12궁 중 하나로, 물을 붓는 사람의 모습입니다. 가을철에 잘 보입니다. Fomalhaut 별 근처에서 찾을 수 있습니다.", season: "가을", location: "황도12궁", story: "트로이의 미소년 가니메데로 알려져 있습니다. 그의 아름다움에 반한 제우스가 독수리로 변해 그를 납치하여 올림포스로 데려왔고, 신들에게 술을 따르는 일을 맡겼습니다. 가니메데가 들고 있는 물병이 별자리가 되었습니다.", characteristics: "물을 붓는 모습, 황도12궁", imageUrl: "" },
            { name: "독수리자리 (Aquila)", description: "여름철 은하수 옆에 있는 별자리로, 밝은 별 알타이르가 있습니다. 백조자리와 거문고자리 사이에 위치하며, 여름철 대삼각형의 한 꼭지점을 이룹니다.", season: "여름", location: "은하수 근처", story: "제우스의 독수리 아이토스로 알려져 있습니다. 제우스의 번개를 나르거나 가니메데를 납치하는 역할을 했습니다.", characteristics: "밝은 별 알타이르 (견우성), 여름철 대삼각형의 일부", imageUrl: "" },
            { name: "제단자리 (Ara)", description: "남반구의 별자리로, 제단을 상징합니다. 은하수 남쪽에 위치하며, 전갈자리 아래에서 찾을 수 있습니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "신들이 거인족과 싸우기 전 맹세했던 제단으로 알려져 있습니다. 혹은 켄타우로스 케이론이 사용했던 제단으로 보기도 합니다.", characteristics: "제단 모양, 은하수 남쪽 위치", imageUrl: "" },
            { name: "양자리 (Aries)", description: "황도12궁 중 하나로, 삼각형 모양의 별들이 양의 머리를 이룹니다. 가을철에 페가수스자리 옆에서 찾을 수 있습니다.", season: "가을~겨울", location: "황도12궁", story: "테살리아 왕 아타마스의 자녀 프릭소스와 헬레가 계모의 학대를 피해 하늘을 나는 황금 양피를 가진 양을 타고 도망쳤습니다. 헬레는 떨어져 죽었지만 프릭소스는 콜키스에 도착했고, 양은 제물로 바쳐져 하늘의 별자리가 되었습니다.", characteristics: "삼각형 모양, 황道12궁", imageUrl: "" },
            { name: "마차부자리 (Auriga)", description: "겨울철 밝은 별 카펠라가 있는 별자리입니다. 오각형 모양으로 눈에 띄며, 황소자리 위에 위치합니다.", season: "겨울", location: "북쪽 하늘", story: "아테나 여신 또는 에리크토니오스 왕으로 알려져 있습니다. 그는 다리가 불편하여 마차를 발명했고, 아테나가 그를 기려 별자리로 만들었다고 합니다.", characteristics: "밝은 별 카펠라, 오각형 모양", imageUrl: "" },
            { name: "목동자리 (Bootes)", description: "봄철 하늘에서 큰곰자리 북두칠성 꼬리 부분을 따라가면 찾을 수 있는 별자리로, 밝은 별 아르크투루스가 있습니다.", season: "봄", location: "북쪽 하늘", story: "큰곰자리 이야기의 아들 아르카스로 알려져 있습니다. 어머니 칼리스토(큰곰자리)를 지키는 목동의 모습입니다. 혹은 포도주를 처음 만든 이카리오스로 보기도 합니다.", characteristics: "밝은 별 아르크투루스, 큰곰자리 꼬리 연장선상에 위치", imageUrl: "" },
            { name: "조각칼자리 (Caelum)", description: "남반구의 매우 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 조각칼을 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "매우 작은 별자리, 조각칼 상징", imageUrl: "" },
            { name: "기린자리 (Camelopardalis)", description: "북쪽 하늘의 어두운 별자리입니다. 큰곰자리와 카시오페이아자리 사이에 넓게 퍼져 있습니다.", season: "연중 관측 가능 (북반구)", location: "북쪽 하늘", story: "없음 (근대 별자리)", characteristics: "어두운 별자리, 넓은 영역 차지", imageUrl: "" },
            { name: "게자리 (Cancer)", description: "황도12궁 중 하나로, 어두워서 찾기 어렵지만, 프레세페 성단(벌집 성단)이 중앙에 있습니다. 쌍둥이자리와 사자자리 사이에 위치합니다.", season: "봄", location: "황도12궁", story: "영웅 헤라클레스가 히드라와 싸울 때, 헤라가 보낸 게가 헤라클레스의 발을 물었습니다. 헤라클레스는 게를 밟아 죽였지만, 헤라는 게의 충성심을 기려 하늘의 별자리로 만들었습니다.", characteristics: "어두운 별자리, 프레세페 성단 (M44), 황도12궁", imageUrl: "" },
            { name: "사냥개자리 (Canes Venatici)", description: "봄철 목동자리와 큰곰자리 사이에 있는 별자리입니다. 두 마리의 사냥개 아스트리온과 카라를 상징합니다.", season: "봄", location: "북쪽 하늘", story: "목동자리(아르카스)가 큰곰자리(칼리스토)를 사냥하려 할 때, 제우스가 보낸 사냥개들이 이를 막았다고 합니다. 혹은 목동자리의 사냥개들로 보기도 합니다.", characteristics: "두 마리의 사냥개, 구상성단 M3", imageUrl: "" },
            { name: "큰개자리 (Canis Major)", description: "겨울철 밤하늘에서 가장 밝은 별 시리우스가 있는 별자리입니다. 오리온자리 아래에 위치합니다.", season: "겨울", location: "은하수 근처", story: "오리온의 충실한 사냥개로 알려져 있습니다. 매우 빠르게 달리는 개였으며, 제우스가 그 속도를 기려 하늘의 별자리로 만들었다고 합니다.", characteristics: "가장 밝은 별 시리우스, 오리온자리 아래 위치", imageUrl: "" },
            { name: "작은개자리 (Canis Minor)", description: "겨울철 큰개자리 옆에 있는 별자리로, 밝은 별 프로키온이 있습니다. 큰개자리와 함께 오리온의 사냥개로 여겨지기도 합니다.", season: "겨울", location: "은하수 근처", story: "오리온의 사냥개 또는 포도주를 만든 이카리오스의 사냥개 마에라로 알려져 있습니다. 주인을 잃고 슬퍼하며 하늘에 올랐다고 합니다.", characteristics: "밝은 별 프로키온, 큰개자리 옆 위치", imageUrl: "" },
            { name: "염소자리 (Capricornus)", description: "황도12궁 중 하나로, 삼각형 모양의 별들이 염소의 뿔처럼 보입니다. 가을철에 물병자리 옆에서 찾을 수 있습니다.", season: "가을", location: "황도12궁", story: "숲의 신 판이 괴물 튀폰을 피해 물고기로 변신하려다 너무 서두른 나머지 상반신은 염소, 하반신은 물고기인 모습이 되었다고 합니다. 제우스가 그의 재치를 기려 별자리로 만들었습니다.", characteristics: "삼각형 모양, 황도12궁", imageUrl: "" },
            { name: "용골자리 (Carina)", description: "남반구의 큰 별자리로, 예전 아르고자리의 일부였습니다. 밝은 별 카노푸스가 있습니다. 남십자자리 근처에 위치합니다.", season: "겨울~봄 (남반구)", location: "남쪽 하늘", story: "황금 양피를 찾기 위해 항해했던 영웅 이아손의 배 아르고호의 용골 부분입니다. 아르고호가 네 개의 별자리(용골, 고물, 돛, 나침반)로 나뉘었습니다.", characteristics: "밝은 별 카노푸스 (밤하늘에서 시리우스 다음으로 밝음), 아르고호의 일부", imageUrl: "" },
            { name: "카시오페이아자리 (Cassiopeia)", description: "W 또는 M 모양으로 밤하늘에서 쉽게 찾을 수 있습니다. 북극성 반대편에 위치하여 큰곰자리와 함께 북극성을 찾는 길잡이가 됩니다.", season: "가을~겨울 (연중 관측 가능)", location: "북쪽 하늘", story: "에티오피아의 왕비 카시오페이아가 자신의 딸 안드로메다가 바다의 요정보다 아름답다고 자랑했습니다. 이에 분노한 포세이돈이 괴물을 보내 나라를 위협했고, 안드로메다를 제물로 바쳐야 했습니다.", characteristics: "W 또는 M 모양, 북극성 찾는 길잡이", imageUrl: "" },
            { name: "센타우루스자리 (Centaurus)", description: "남반구의 큰 별자리로, 알파 센타우리와 베타 센타우리가 있습니다. 남십자자리 옆에 위치합니다.", season: "봄 (남반구)", location: "남쪽 하늘", story: "현명하고 정의로운 켄타우로스 케이론으로 알려져 있습니다. 많은 영웅들의 스승이었으나 헤라클레스의 실수로 상처를 입고 불멸의 고통에 시달리다가 죽었습니다. 혹은 야만적인 켄타우로스로 보기도 합니다.", characteristics: "알파 센타우리 (프록시마 센타우리 포함), 베타 센타우리, 큰 별자리", imageUrl: "" },
            { name: "세페우스자리 (Cepheus)", description: "집 모양의 별자리로, 변광성 델타 세페이가 유명합니다. 북쪽 하늘에서 카시오페이아자리 옆에 위치합니다.", season: "가을~겨울 (연중 관측 가능)", location: "북쪽 하늘", story: "에티오피아의 왕이자 안드로메다의 아버지인 세페우스입니다. 아내 카시오페이아와 딸 안드로메다와 함께 하늘의 별자리가 되었습니다.", characteristics: "집 모양, 변광성 델타 세페이", imageUrl: "" },
            { name: "고래자리 (Cetus)", description: "가을철에 볼 수 있는 큰 별자리입니다. 물고기자리와 에리다누스자리 근처에 위치합니다.", season: "가을", location: "적도 부근", story: "그리스 신화에서 에티오피아를 위협했던 바다 괴물 케토스입니다. 안드로메다 공주를 제물로 요구했으나 페르세우스에게 죽었습니다.", characteristics: "매우 큰 별자리", imageUrl: "" },
            { name: "카멜레온자리 (Chamaeleon)", description: "남반구의 작은 별자리입니다. 16세기 네덜란드 항해사들이 카멜레온을 보고 만들었습니다.", season: "봄 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 카멜레온 상징", imageUrl: "" },
            { name: "컴퍼스자리 (Circinus)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 컴퍼스를 기념하여 만들었습니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 컴퍼스 상징", imageUrl: "" },
            { name: "비둘기자리 (Columba)", description: "남반구의 작은 별자리로, 비둘기를 상징합니다. 큰개자리 아래에 위치합니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "노아의 방주에서 육지를 찾기 위해 날아간 비둘기 또는 영웅 이아손의 아르고호가 항해할 때 길을 안내했던 비둘기로 알려져 있습니다.", characteristics: "비둘기 모양, 작은 별자리", imageUrl: "" },
            { name: "머리털자리 (Coma Berenices)", description: "봄철 사자자리 꼬리 부분과 목동자리 사이에 있는 별자리로, 아름다운 성단(멜로트 111)이 있습니다.", season: "봄", location: "북쪽 하늘", story: "이집트의 베레니케 2세 왕비가 남편의 무사 귀환을 빌며 자신의 아름다운 머리카락을 아프로디테 신전에 바쳤는데, 신전에서 사라진 머리카락이 하늘의 별자리가 되었다고 합니다.", characteristics: "머리카락 모양, 성단 (멜로트 111)", imageUrl: "" },
            { name: "남쪽왕관자리 (Corona Australis)", description: "남반구의 작은 별자리로, 왕관 모양입니다. 궁수자리 아래에 위치합니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "켄타우로스 케이론이 쓴 왕관으로 알려져 있습니다. 혹은 디오니소스 신이 아리아드네에게 준 왕관으로 보기도 합니다.", characteristics: "왕관 모양, 작은 별자리", imageUrl: "" },
            { name: "북쪽왕관자리 (Corona Borealis)", description: "봄철 목동자리 옆에 있는 별자리로, 왕관 모양입니다. 밝은 별 젬마가 있습니다.", season: "봄", location: "북쪽 하늘", story: "크레타의 공주 아리아드네가 영웅 테세우스를 도운 대가로 받은 왕관입니다. 디오니소스 신이 그녀를 사랑하여 왕관을 하늘에 올렸다고 합니다.", characteristics: "왕관 모양, 밝은 별 젬마", imageUrl: "" },
            { name: "까마귀자리 (Corvus)", description: "봄철 처녀자리 옆에 있는 작은 별자리입니다. 네 개의 별이 사다리꼴 모양을 이룹니다.", season: "봄", location: "적도 부근", story: "아폴론 신의 충실한 까마귀였으나 거짓말을 하여 벌을 받아 목소리를 잃고 검은 깃털을 갖게 되었다고 합니다.", characteristics: "작은 별자리, 사다리꼴 모양", imageUrl: "" },
            { name: "컵자리 (Crater)", description: "봄철 까마귀자리 옆에 있는 작은 별자리입니다. 컵 모양을 하고 있습니다.", season: "봄", location: "적도 부근", story: "아폴론 신의 까마귀가 물을 뜨려다 실패하고 가져온 컵으로 알려져 있습니다. 아폴론이 까마귀와 컵 모두를 하늘에 올렸다고 합니다.", characteristics: "컵 모양, 작은 별자리", imageUrl: "" },
            { name: "남십자자리 (Crux)", description: "남반구의 대표적인 별자리로, 십자가 모양입니다. 남극을 찾는 데 사용되는 중요한 별자리입니다.", season: "봄 (남반구)", location: "남쪽 하늘 (남극 근처)", story: "고대에는 센타우루스자리의 일부였으나 17세기에 분리되었습니다. 특별한 신화는 없지만 남반구에서 남쪽을 찾는 중요한 길잡이 역할을 합니다.", characteristics: "십자가 모양, 남극 찾는 길잡이", imageUrl: "" },
            { name: "백조자리 (Cygnus)", description: "여름철 은하수에서 가장 눈에 띄는 별자리 중 하나로, 백조가 날아가는 모양입니다. 밝은 별 데네브가 있으며, 여름철 대삼각형의 한 꼭지점을 이룹니다.", season: "여름", location: "은하수 중심", story: "제우스가 스파르타의 왕비 레다를 유혹하기 위해 백조로 변신한 모습으로 가장 잘 알려져 있습니다. 혹은 음악가 오르페우스가 죽은 후 그의 거문고와 함께 하늘에 오른 백조로 보기도 합니다.", characteristics: "백조 모양, 밝은 별 데네브, 여름철 대삼각형의 일부", imageUrl: "" },
            { name: "돌고래자리 (Delphinus)", description: "여름철 작은 별자리로, 돌고래가 뛰어오르는 모양입니다. 백조자리와 독수리자리 사이에 위치합니다.", season: "여름", location: "은하수 근처", story: "포세이돈 신이 암피트리테와 결혼하도록 설득한 돌고래로 알려져 있습니다. 혹은 시인 아리온이 바다에 빠졌을 때 그의 노래에 감동한 돌고래가 그를 구해준 이야기와 관련 있습니다.", characteristics: "돌고래 모양, 작은 별자리", imageUrl: "" },
            { name: "황새치자리 (Dorado)", description: "남반구의 작은 별자리입니다. 대마젤란 은하의 대부분을 포함합니다. 16세기 네덜란드 항해사들이 황새치를 보고 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 대마젤란 은하 포함", imageUrl: "" },
            { name: "용자리 (Draco)", description: "북극성을 감싸고 있는 긴 별자리입니다. 작은곰자리 주위를 휘감고 있는 모양입니다.", season: "연중 관측 가능", location: "북쪽 하늘 (북극성 주변)", story: "헤스페리데스의 황금 사과를 지키던 백 개의 머리를 가진 용 라돈으로 알려져 있습니다. 혹은 기간토마키아(거인족과 신들의 전쟁)에서 아테나에게 죽은 거인으로 보기도 합니다.", characteristics: "북극성을 감싸는 긴 뱀 모양", imageUrl: "" },
            { name: "조랑말자리 (Equuleus)", description: "가을철 페가수스자리 옆에 있는 작은 별자리입니다. 88개 별자리 중 두 번째로 작습니다.", season: "가을", location: "북쪽 하늘", story: "헤르메스가 펠롭스에게 선물한 날개 달린 말 켈레스 또는 포세이돈이 아테나와의 경쟁에서 만든 말로 알려져 있습니다.", characteristics: "매우 작은 별자리, 조랑말 모양", imageUrl: "" },
            { name: "에리다누스자리 (Eridanus)", description: "겨울철에 길게 늘어진 별자리로, 강을 상징합니다. 오리온자리 아래에서 시작하여 남쪽 하늘까지 길게 이어집니다.", season: "겨울", location: "적도 부근", story: "태양신 헬리오스의 아들 파에톤이 태양 마차를 몰다 떨어져 죽은 강으로 알려져 있습니다. 혹은 이집트의 나일강이나 이탈리아의 포강으로 보기도 합니다.", characteristics: "길게 늘어진 모양, 강 상징", imageUrl: "" },
            { name: "화로자리 (Fornax)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 화학 실험용 화로를 기념하여 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 화로 상징", imageUrl: "" },
            { name: "쌍둥이자리 (Gemini)", description: "황도12궁 중 하나로, 카스토르와 폴룩스라는 두 개의 밝은 별이 나란히 있어 쌍둥이처럼 보입니다. 겨울철 오리온자리 옆에 위치합니다.", season: "겨울", location: "황道12궁", story: "스파르타의 왕비 레다와 제우스 사이에서 태어난 형제입니다. 카스토르는 필멸의 인간이었고 폴룩스는 불멸의 신이었습니다. 카스토르가 죽자 폴룩스가 슬퍼하며 제우스에게 빌어 함께 하늘의 별자리가 되었습니다.", characteristics: "밝은 두 별 카스토르와 폴룩스, 쌍둥이 모양, 황도12궁", imageUrl: "" },
            { name: "두루미자리 (Grus)", description: "남반구의 별자리로, 두루미를 상징합니다. 16세기 네덜란드 항해사들이 남반구의 새를 보고 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "헤라의 신성한 새인 공작새로 알려져 있습니다. 아르고스의 눈을 공작새 깃털에 박아 넣었다는 신화와 관련 있습니다.", characteristics: "학 모양, 남반구 별자리", imageUrl: "" },
            { name: "헤라클레스자리 (Hercules)", description: "여름철 북쪽 하늘에서 큰 별자리 중 하나입니다. 무릎 꿇고 있는 영웅의 모습으로 상상됩니다.", season: "여름", location: "북쪽 하늘", story: "그리스 신화의 가장 위대한 영웅 헤라클레스입니다. 12가지 어려운 과업을 완수했으며, 그의 힘과 용맹을 기려 하늘의 별자리가 되었습니다.", characteristics: "매우 큰 별자리, 무릎 꿇은 영웅 모양", imageUrl: "" },
            { name: "시계자리 (Horologium)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 진자 시계를 기념하여 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 시계 상징", imageUrl: "" },
            { name: "바다뱀자리 (Hydra)", description: "매우 길게 늘어진 별자리로, 뱀을 상징합니다. 봄철 남쪽 하늘에서 동쪽으로 길게 이어집니다.", season: "봄", location: "적도 부근", story: "영웅 헤라클레스가 물리친 아홉 개의 머리를 가진 괴물 히드라입니다. 헤라클레스의 두 번째 과업 대상이었습니다.", characteristics: "매우 긴 별자리, 뱀 모양", imageUrl: "" },
            { name: "남쪽물뱀자리 (Hydrus)", description: "남반구의 별자리로, 작은 물뱀을 상징합니다. 소마젤란 은하의 일부를 포함합니다. 16세기 네덜란드 항해사들이 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 물뱀 모양, 소마젤란 은하 포함", imageUrl: "" },
            { name: "인디언자리 (Indus)", description: "남반구의 별자리로, 인디언을 상징합니다. 16세기 네덜란드 항해사들이 아메리카 원주민을 보고 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "인디언 모습, 남반구 별자리", imageUrl: "" },
            { name: "도마뱀자리 (Lacerta)", description: "가을철 작은 별자리입니다. 백조자리와 안드로메다자리 사이에 위치합니다.", season: "가을", location: "북쪽 하늘", story: "17세기 폴란드 천문학자 헤벨리우스가 만들었습니다. 특별한 신화는 없습니다.", characteristics: "작은 별자리", imageUrl: "" },
            { name: "사자자리 (Leo)", description: "황도12궁 중 하나로, 낫 모양의 별들이 사자의 머리를 이루며, 밝은 별 레굴루스가 있습니다. 봄철 하늘에서 눈에 띄는 별자리입니다.", season: "봄", location: "황도12궁", story: "영웅 헤라클레스의 첫 번째 과업 대상이었던 네메아의 사자입니다. 어떤 무기로도 상처 입힐 수 없었으나 헤라클레스가 맨손으로 물리쳤습니다.", characteristics: "낫 모양의 머리, 밝은 별 레굴루스, 황도12궁", imageUrl: "" },
            { name: "작은사자자리 (Leo Minor)", description: "봄철 사자자리와 큰곰자리 사이에 있는 작은 별자리입니다. 17세기 폴란드 천문학자 헤벨리우스가 만들었습니다.", season: "봄", location: "북쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리", imageUrl: "" },
            { name: "토끼자리 (Lepus)", description: "겨울철 오리온자리 아래에 있는 별자리입니다. 오리온이 사냥하는 토끼를 상징합니다.", season: "겨울", location: "적도 부근", story: "위대한 사냥꾼 오리온이 사냥하는 토끼로 알려져 있습니다. 오리온자리 아래에 위치합니다.", characteristics: "토끼 모양, 오리온자리 아래 위치", imageUrl: "" },
            { name: "천칭자리 (Libra)", description: "황도12궁 중 하나로, 처녀자리와 전갈자리 사이에 있습니다. 저울 모양을 하고 있습니다.", season: "봄~여름", location: "황道12궁", story: "정의의 여신 아스트라이아(처녀자리)가 인간의 선악을 측정할 때 사용했던 저울이라고 합니다. 정의가 사라진 인간 세상에 실망하여 아스트라이아가 하늘로 올라갈 때 저울도 함께 올라갔다고 합니다.", characteristics: "저울 모양, 황도12궁", imageUrl: "" },
            { name: "이리자리 (Lupus)", description: "남반구의 별자리로, 늑대를 상징합니다. 센타우루스자리 아래에 위치합니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "켄타우로스에게 제물로 바쳐진 늑대 또는 리카온 왕이 변한 늑대로 알려져 있습니다.", characteristics: "늑대 모양, 남반구 별자리", imageUrl: "" },
            { name: "살쾡이자리 (Lynx)", description: "북쪽 하늘의 어두운 별자리입니다. 큰곰자리와 마차부자리 사이에 넓게 퍼져 있습니다. 17세기 폴란드 천문학자 헤벨리우스가 만들었습니다.", season: "겨울~봄", location: "북쪽 하늘", story: "살쾡이처럼 눈이 좋아야 볼 수 있을 정도로 어두운 별들로 이루어져 있다고 해서 붙여진 이름입니다.", characteristics: "어두운 별자리, 넓은 영역 차지", imageUrl: "" },
            { name: "거문고자리 (Lyra)", description: "여름철 은하수 옆에 있는 별자리로, 밝은 별 베가가 있습니다. 백조자리와 독수리자리와 함께 여름철 대삼각형을 이룹니다.", season: "여름", location: "은하수 근처", story: "음악가 오르페우스의 리라(수금)입니다. 그의 아름다운 음악은 모든 생명체를 매혹시켰으며, 오르페우스가 죽은 후 리라는 하늘의 별자리가 되었습니다.", characteristics: "밝은 별 베가, 여름철 대삼각형의 일부, 리라 모양", imageUrl: "" },
            { name: "테이블산자리 (Mensa)", description: "남반구의 작은 별자리입니다. 남아프리카의 테이블산을 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 대마젤란 은하 포함, 테이블산 상징", imageUrl: "" },
            { name: "현미경자리 (Microscopium)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 현미경을 기념하여 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 현미경 상징", imageUrl: "" },
            { name: "외뿔소자리 (Monoceros)", description: "겨울철 은하수 안에 있는 별자리입니다. 오리온자리와 큰개자리 사이에 위치합니다.", season: "겨울", location: "은하수 중심", story: "17세기 네덜란드 천문학자 플랑시우스가 만들었습니다. 특별한 신화는 없습니다.", characteristics: "은하수 안의 별자리, 외뿔소 상징", imageUrl: "" },
            { name: "파리자리 (Musca)", description: "남반구의 작은 별자리입니다. 남십자자리 바로 아래에 위치합니다. 16세기 네덜란드 항해사들이 만들었습니다.", season: "봄 (남반구)", location: "남쪽 하늘", story: "16세기 네덜란드 항해사들이 남반구의 곤충을 보고 만들었습니다. 처음에는 벌자리로 불리기도 했습니다.", characteristics: "작은 별자리, 파리 상징", imageUrl: "" },
            { name: "직각자자리 (Norma)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 자와 삼각자를 기념하여 만들었습니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 자와 삼각자 상징", imageUrl: "" },
            { name: "팔분의자리 (Octans)", description: "남반구의 별자리로, 천구의 남극을 포함합니다. 18세기 프랑스 천문학자 라카유가 팔분의를 기념하여 만들었습니다.", season: "연중 관측 가능 (남반구)", location: "남쪽 하늘 (남극)", story: "없음 (근대 별자리)", characteristics: "남극 포함 별자리, 팔분의 상징", imageUrl: "" },
            { name: "뱀주인자리 (Ophiuchus)", description: "여름철 황도에 걸쳐 있는 큰 별자리입니다. 뱀을 들고 있는 사람의 모습입니다.", season: "여름", location: "황도 근처", story: "의술의 신 아스클레피오스로 알려져 있습니다. 죽은 사람도 살리는 그의 능력 때문에 하데스가 불평했고, 제우스가 그를 하늘의 별자리로 만들었습니다. 뱀은 의술을 상징합니다.", characteristics: "뱀을 들고 있는 모습, 황道에 걸쳐 있음", imageUrl: "" },
            { name: "오리온자리 (Orion)", description: "겨울철 대표적인 별자리로, 삼태성이라는 세 개의 밝은 별이 나란히 있습니다. 밤하늘에서 가장 눈에 띄는 별자리 중 하나입니다.", season: "겨울", location: "적도 부근", story: "그리스 신화의 위대한 사냥꾼 오리온. 포세이돈의 아들로 거인이며 뛰어난 사냥꾼이었습니다. 그의 오만함 때문에 전갈에게 쏘여 죽었다는 이야기 가 전해집니다. 오리온자리와 전갈자리는 하늘의 반대편에 위치하여 동시에 볼 수 없습니다.", characteristics: "삼태성 (오리온의 허리띠), 붉은색 초거성 베텔게우스, 푸른색 초거성 리겔, 오리온 대성운 (M42)", imageUrl: "" },
            { name: "공작새자리 (Pavo)", description: "남반구의 별자리로, 공작새를 상징합니다. 16세기 네덜란드 항해사들이 남반구의 새를 보고 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "헤라의 신성한 새인 공작새로 알려져 있습니다. 아르고스의 눈을 공작새 깃털에 박아 넣었다는 신화와 관련 있습니다.", characteristics: "공작새 모양, 남반구 별자리", imageUrl: "" },
            { name: "페가수스자리 (Pegasus)", description: "가을철 북쪽 하늘에서 큰 사각형 모양으로 눈에 띄는 별자리입니다. 날개 달린 말 페가수스를 상징합니다.", season: "가을", location: "북쪽 하늘", story: "영웅 페르세우스가 메두사의 목에서 태어난 날개 달린 말입니다. 영웅 벨레로폰이 타고 키마이라를 물리쳤으며, 후에 하늘의 별자리가 되었습니다.", characteristics: "큰 사각형 (페가수스의 몸통), 날개 달린 말 상징", imageUrl: "" },
            { name: "페르세우스자리 (Perseus)", description: "영웅 페르세우스의 별자리로, 변광성 알골이 유명합니다. 가을철 북쪽 하늘에서 안드로메다자리 옆에 위치합니다.", season: "가을~겨울", location: "북쪽 하늘", story: "그리스 신화의 영웅 페르세우스는 메두사의 목을 베고, 바다 괴물 케토스에게 제물로 바쳐질 위기에 처한 안드로메다 공주를 구했습니다. 그의 모험담이 별자리에 담겨 있습니다.", characteristics: "영웅의 모습, 변광성 알골 (메두사의 눈), 안드로메다자리 옆 위치", imageUrl: "" },
            { name: "불사조자리 (Phoenix)", description: "남반구의 별자리로, 불사조를 상징합니다. 16세기 네덜란드 항해사들이 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "불멸의 새인 불사조입니다. 스스로 불타 죽고 그 재에서 다시 태어난다고 합니다.", characteristics: "불사조 모양, 남반구 별자리", imageUrl: "" },
            { name: "화가자리 (Pictor)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 화가를 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 화가 상징", imageUrl: "" },
            { name: "물고기자리 (Pisces)", description: "황도12궁 중 하나로, 두 마리의 물고기가 끈으로 연결된 모습입니다. 봄철에 잘 보입니다. 물병자리와 양자리 사이에 위치합니다.", season: "가을~겨울", location: "황도12궁", story: "괴물 튀폰에게 쫓기던 아프로디테(사랑의 여신)와 에로스(사랑의 신)가 물고기로 변신하여 유프라테스 강으로 도망갔다고 합니다. 서로를 잃어버리지 않기 위해 끈으로 몸을 묶었다고 합니다.", characteristics: "두 마리 물고기가 끈으로 연결된 모습, 황도12궁", imageUrl: "" },
            { name: "남쪽물고기자리 (Piscis Austrinus)", description: "가을철에 보이는 별자리로, 밝은 별 포말하우트가 있습니다. 물병자리 아래에 위치합니다.", season: "가을", location: "남쪽 하늘", story: "물병자리에서 흘러나온 물을 마시는 물고기입니다. 혹은 아프로디테가 물고기로 변신했을 때의 모습으로 보기도 합니다.", characteristics: "밝은 별 포말하우트, 물병자리 아래 위치", imageUrl: "" },
            { name: "고물자리 (Puppis)", description: "남반구의 큰 별자리로, 예전 아르고자리의 일부였습니다. 겨울철 남쪽 하늘에서 넓게 퍼져 있습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "황금 양피를 찾기 위해 항해했던 영웅 이아손의 배 아르고호의 고물 부분입니다.", characteristics: "아르고호의 일부, 큰 별자리", imageUrl: "" },
            { name: "나침반자리 (Pyxis)", description: "남반구의 작은 별자리로, 예전 아르고자리의 일부였습니다. 18세기 프랑스 천문학자 라카유가 아르고호의 나침반을 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "황금 양피를 찾기 위해 항해했던 영웅 이아손의 배 아르고호의 나침반입니다.", characteristics: "아르고호의 일부, 작은 별자리", imageUrl: "" },
            { name: "그물자리 (Reticulum)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 망원경의 접안렌즈에 있는 그물을 기념하여 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 그물 상징", imageUrl: "" },
            { name: "화살자리 (Sagitta)", description: "작고 눈에 띄지는 않지만 쉽게 인식할 수 있는 별자리입니다. 여름철에 볼 수 있으며, 백조자리와 독수리자리 사이에 위치해 있습니다.", season: "여름", location: "북쪽 하늘", story: "그리스 신화에서는 헤라클레스가 독수리를 향해 쏜 화살로 알려져 있으며, 제우스가 전령으로 사용한 화살이라는 전설도 전해집니다.", characteristics: "작고 곧은 화살 모양, 북반구에서 잘 보임", imageUrl: "" },
            { name: "궁수자리 (Sagittarius)", description: "황도12궁 중 하나로, 활을 쏘는 사람의 모습이며, 은하수의 중심 방향에 있어 별들이 매우 많습니다. 주전자 모양으로도 보입니다.", season: "여름", location: "황도12궁 (은하수 중심 방향)", story: "현명하고 정의로운 켄타우로스 케이론으로 알려져 있습니다. 많은 영웅들의 스승이었으며, 헤라클레스의 실수로 상처를 입고 불멸의 고통에 시달리다가 프로메테우스를 위해 불멸을 포기하고 죽었습니다. 제우스가 그의 지혜와 선행을 기려 하늘에 올렸습니다.", characteristics: "활 쏘는 켄타우로스 모습, 주전자 모양, 은하수 중심 위치, 황도12궁", imageUrl: "" },
            { name: "전갈자리 (Scorpius)", description: "황도12궁 중 하나로, S자 모양의 큰 별자리로, 붉은 별 안타레스가 심장에 해당합니다. 여름철에 남쪽 하늘에서 잘 보입니다.", season: "여름", location: "황도12궁", story: "위대한 사냥꾼 오리온의 오만함을 벌하기 위해 가이아(대지의 여신)가 보낸 전갈입니다. 오리온을 쏘아 죽였으며, 오리온자리와 전갈자리는 하늘의 반대편에 위치하여 동시에 볼 수 없습니다.", characteristics: "S자 모양, 붉은 1등성 안타레스, 황도12궁", imageUrl: "" },
            { name: "조각가자리 (Sculptor)", description: "남반구의 어두운 별자리입니다. 18세기 프랑스 천문학자 라카유가 조각가를 기념하여 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "어두운 별자리, 조각가 상징", imageUrl: "" },
            { name: "방패자리 (Scutum)", description: "여름철 은하수 안에 있는 작은 별자리입니다. 17세기 폴란드 천문학자 헤벨리우스가 폴란드 왕 얀 3세 소비에스키의 승리를 기념하여 만들었습니다.", season: "여름", location: "은하수 안", story: "폴란드 왕 얀 3세 소비에스키의 방패를 상징합니다. 빈 전투에서의 승리를 기념하여 만들어졌습니다.", characteristics: "작은 별자리, 은하수 안, 방패 상징", imageUrl: "" },
            { name: "뱀자리 (Serpens)", description: "뱀주인자리가 들고 있는 뱀을 나타내는 별자리입니다. 뱀주인자리에 의해 머리 부분(Serpens Caput)과 꼬리 부분(Serpens Cauda)으로 나뉘어 있습니다.", season: "여름", location: "황도 근처", story: "뱀주인자리(아스클레피오스)가 들고 있는 뱀입니다. 뱀은 의술과 치유를 상징합니다.", characteristics: "뱀주인자리에 의해 나뉜 별자리", imageUrl: "" },
            { name: "육분의자리 (Sextans)", description: "작은 별자리입니다. 바다뱀자리와 사자자리 사이에 위치합니다. 17세기 폴란드 천문학자 헤벨리우스가 만들었습니다.", season: "겨울~봄", location: "적도 부근", story: "17세기 천문학 도구인 육분의를 상징합니다. 헤벨리우스가 사용했던 도구를 기념하여 만들었습니다.", characteristics: "작은 별자리, 육분의 상징", imageUrl: "" },
            { name: "황소자리 (Taurus)", description: "황도12궁 중 하나로, 붉은 별 알데바란이 있으며, 플레이아데스 성단(좀생이별)과 히아데스 성단을 포함합니다. 겨울철 오리온자리 옆에 위치합니다.", season: "겨울", location: "황도12궁", story: "제우스가 페니키아의 아름다운 공주 에우로페에게 반해 하얀 황소로 변신하여 나타났습니다. 에우로페가 황소 등에 타자 제우스는 바다를 건너 크레타 섬으로 갔습니다.", characteristics: "붉은 별 알데바란 (황소의 눈), 플레이아데스 성단 (좀생이별), V자 모양의 히아데스 성단 (황소의 얼굴), 황도12궁", imageUrl: "" },
            { name: "망원경자리 (Telescopium)", description: "남반구의 작은 별자리입니다. 18세기 프랑스 천문학자 라카유가 망원경을 기념하여 만들었습니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 망원경 상징", imageUrl: "" },
            { name: "삼각형자리 (Triangulum)", description: "가을철 작은 별자리입니다. 안드로메다자리 아래에 위치하며, 삼각형 모양을 하고 있습니다.", season: "가을", location: "북쪽 하늘", story: "나일강 삼각주 또는 시칠리아 섬을 상징한다고 합니다. 고대부터 알려진 별자리입니다.", characteristics: "삼각형 모양, 작은 별자리", imageUrl: "" },
            { name: "남쪽삼각형자리 (Triangulum Australe)", description: "남반구의 작은 별자리로, 밝은 삼각형 모양입니다. 남십자자리 옆에 위치합니다.", season: "여름 (남반구)", location: "남쪽 하늘", story: "16세기 네덜란드 항해사들이 남반구 하늘에 있는 밝은 세 별을 보고 만들었습니다. 특별한 신화는 없습니다.", characteristics: "밝은 삼각형 모양, 남반구 별자리", imageUrl: "" },
            { name: "큰부리새자리 (Tucana)", description: "남반구의 별자리로, 큰부리새를 상징합니다. 소마젤란 은하의 대부분을 포함합니다. 16세기 네덜란드 항해사들이 남반구의 새를 보고 만들었습니다.", season: "가을 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "큰부리새 모양, 소마젤란 은하 포함", imageUrl: "" },
            { name: "큰곰자리 (Ursa Major)", description: "북두칠성을 포함하고 있으며, 국자 모양으로 유명합니다. 북쪽 하늘에서 연중 관측 가능하며, 북극성을 찾는 데 사용됩니다.", season: "봄~여름 (연중 관측 가능)", location: "북쪽 하늘", story: "제우스의 연인인 아름다운 님프 칼리스토가 헤라의 질투로 곰으로 변했습니다. 아들 아르카스에게 사냥당할 뻔했으나 제우스가 모자를 모두 하늘의 별자리로 만들었다고 합니다.", characteristics: "북두칠성 (국자 모양), 북극성을 찾는 길잡이 별자리, 미자르와 알코르", imageUrl: "" },
            { name: "작은곰자리 (Ursa Minor)", description: "북극성을 포함하고 있으며, 작은 국자 모양입니다. 북극성이 이 별자리의 꼬리 끝에 있습니다. 북쪽 하늘에서 연중 관측 가능합니다.", season: "연중 관측 가능", location: "북쪽 하늘 (북극성을 포함)", story: "큰곰자리 이야기의 아들 아르카스가 변한 작은 곰입니다. 어머니 칼리스토와 함께 하늘에 올라 별자리가 되었습니다. 북극성이 작은곰자리의 꼬리 끝에 있습니다.", characteristics: "북극성 (폴라리스), 작은 국자 모양", imageUrl: "" },
            { name: "돛자리 (Vela)", description: "남반구의 큰 별자리로, 예전 아르고자리의 일부였습니다. 겨울철 남쪽 하늘에서 넓게 퍼져 있습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "황금 양피를 찾기 위해 항해했던 영웅 이아손의 배 아르고호의 돛 부분입니다.", characteristics: "아르고호의 일부, 큰 별자리", imageUrl: "" },
            { name: "처녀자리 (Virgo)", description: "황도12궁 중 하나로, 봄철 저녁 하늘에서 가장 큰 별자리 중 하나이며, 밝은 별 스피카가 있습니다. 사자자리 옆에 위치합니다.", season: "봄", location: "황도12궁", story: "정의의 여신 아스트라이아로 알려져 있습니다. 인간 세상에 정의가 사라지자 하늘로 올라가 별자리가 되었다고 합니다. 혹은 풍요의 여신 데메테르로 보기도 합니다.", characteristics: "황도12궁 중 가장 큰 별자리, 밝은 별 스피카", imageUrl: "" },
            { name: "날치자리 (Volans)", description: "남반구의 작은 별자리입니다. 16세기 네덜란드 항해사들이 남반구의 물고기를 보고 만들었습니다.", season: "겨울 (남반구)", location: "남쪽 하늘", story: "없음 (근대 별자리)", characteristics: "작은 별자리, 날치 상징", imageUrl: "" },
            { name: "여우자리 (Vulpecula)", description: "여름철 작은 별자리입니다. 백조자리와 화살자리 사이에 은하수 안에 위치합니다. 17세기 폴란드 천문학자 헤벨리우스가 만들었습니다.", season: "여름", location: "은하수 안", story: "여우를 상징하며, 여우가 거위를 물고 있는 모습으로 그려지기도 했습니다. 특별한 신화는 없습니다.", characteristics: "작은 별자리, 은하수 안", imageUrl: "" }
        ];

        // 이미지 URL 매핑 (기존과 동일)
        const imageUrlMap = {
            "Andromeda": "https://www.shutterstock.com/image-illustration/Andromeda-88-constellations-astronomy-series-260nw-1902562573.jpg",
            "Antlia": "https://www.shutterstock.com/image-illustration/Antlia-88-constellations-astronomy-series-260nw-1903375231.jpg",
            "Apus": "https://www.shutterstock.com/image-illustration/Apus-88-constellations-astronomy-series-260nw-1903344478.jpg",
            "Aquarius": "https://sugarandcanvas.com/cdn/shop/products/CA06-C.jpg",
            "Aquila": "https://www.shutterstock.com/image-illustration/Aquila-88-constellations-astronomy-series-260nw-1903328257.jpg",
            "Ara": "https://www.shutterstock.com/image-illustration/Ara-88-constellations-astronomy-series-260nw-1903343116.jpg",
            "Aries": "https://www.shutterstock.com/image-illustration/Aries-88-constellations-astronomy-series-260nw-1903373839.jpg",
            "Auriga": "https://www.shutterstock.com/image-illustration/Auriga-88-constellations-astronomy-series-260nw-1903369750.jpg",
            "Bootes": "https://storage.noirlab.edu/media/archives/images/wallpaper2/bootes-flashcard.jpg",
            "Caelum": "https://www.shutterstock.com/image-illustration/Caelum-88-constellations-astronomy-series-260nw-1903186744.jpg",
            "Camelopardalis": "https://www.shutterstock.com/image-illustration/Camelopardalis-88-constellations-astronomy-series-260nw-1903367791.jpg",
            "Cancer": "https://i.ytimg.com/vi/oMQCYhf3HeY/sddefault.jpg",
            "Canes Venatici": "https://cdn.vectorstock.com/i/1000v/40/65/canes-venatici-constellation-starry-night-sky-vector-30734065.jpg",
            "Canis Major": "https://www.star-registration.com/cdn/shop/articles/25_Grosser-Hund_1200x1200.jpg?v=1681134141",
            "Canis Minor": "https://theplanets.org/123/2021/05/constellation-of-Canis-Minor.jpg",
            "Capricornus": "https://www.shutterstock.com/image-illustration/Capricornus-88-constellations-astronomy-series-260nw-1903375504.jpg",
            "Carina": "https://www.shutterstock.com/image-illustration/Carina-88-constellations-astronomy-series-260nw-1903363819.jpg",
            "Cassiopeia": "https://www.shutterstock.com/image-illustration/Cassiopeia-88-constellations-astronomy-series-260nw-1903187086.jpg",
            "Centaurus": "https://www.shutterstock.com/image-illustration/Centaurus-88-constellations-astronomy-series-260nw-1903349860.jpg",
            "Cepheus": "https://www.shutterstock.com/image-illustration/Cepheus-88-constellations-astronomy-series-260nw-1902606604.jpg",
            "Cetus": "https://www.shutterstock.com/image-illustration/Cetus-88-constellations-astronomy-series-260nw-1902605485.jpg",
            "Chamaeleon": "https://www.shutterstock.com/image-illustration/Chamaeleon-88-constellations-astronomy-series-260nw-1903356424.jpg",
            "Circinus": "https://www.shutterstock.com/image-illustration/Circinus-88-constellations-astronomy-series-260nw-1903346038.jpg",
            "Columba": "https://www.shutterstock.com/image-illustration/Columba-88-constellations-astronomy-series-260nw-1903368472.jpg",
            "Coma Berenices": "https://www.star-registration.com/cdn/shop/articles/26_Haar-der-Berenike_1200x1200.jpg?v=1681138160",
            "Corona Australis": "https://theplanets.org/123/2021/05/corona-aus.jpg",
            "Corona Borealis": "https://www.star-registration.com/cdn/shop/articles/49_Noerdliche-Krone_1200x1200.jpg?v=1681653503",
            "Corvus": "https://www.shutterstock.com/image-illustration/Corvus-88-constellations-astronomy-series-260nw-1903347946.jpg",
            "Crater": "https://www.shutterstock.com/image-illustration/Crater-88-constellations-astronomy-series-260nw-1903354837.jpg",
            "Crux": "https://www.shutterstock.com/image-illustration/Crux-88-constellations-astronomy-series-260nw-1903348897.jpg",
            "Cygnus": "https://www.shutterstock.com/image-illustration/Cygnus-88-constellations-astronomy-series-260nw-1903329160.jpg",
            "Delphinus": "https://www.shutterstock.com/image-illustration/Delphinus-88-constellations-astronomy-series-260nw-1903329280.jpg",
            "Dorado": "https://www.shutterstock.com/image-illustration/Dorado-88-constellations-astronomy-series-260nw-1903369090.jpg",
            "Draco": "https://www.shutterstock.com/image-illustration/Draco-88-constellations-astronomy-series-260nw-1903342933.jpg",
            "Equuleus": "https://www.shutterstock.com/image-illustration/Equuleus-88-constellations-astronomy-series-260nw-1903330039.jpg",
            "Eridanus": "https://www.shutterstock.com/image-illustration/Eridanus-88-constellations-astronomy-series-260nw-1902606799.jpg",
            "Fornax": "https://www.shutterstock.com/image-illustration/Fornax-88-constellations-astronomy-series-260nw-1903186564.jpg",
            "Gemini": "https://www.shutterstock.com/image-illustration/Gemini-88-constellations-astronomy-series-260nw-1903373923.jpg",
            "Grus": "https://www.shutterstock.com/image-illustration/Grus-88-constellations-astronomy-series-260nw-1903026274.jpg",
            "Hercules": "https://www.shutterstock.com/image-illustration/Hercules-88-constellations-astronomy-series-260nw-1903342321.jpg",
            "Horologium": "https://www.shutterstock.com/image-illustration/Horologium-88-constellations-astronomy-series-260nw-1903185937.jpg",
            "Hydra": "https://www.shutterstock.com/image-illustration/Hydra-88-constellations-astronomy-series-260nw-1903357381.jpg",
            "Hydrus": "https://www.shutterstock.com/image-illustration/Hydrus-88-constellations-astronomy-series-260nw-1903186282.jpg",
            "Indus": "https://www.shutterstock.com/image-illustration/Indus-88-constellations-astronomy-series-260nw-1903328899.jpg",
            "Lacerta": "https://www.shutterstock.com/image-illustration/Lacerta-88-constellations-astronomy-series-260nw-1903187383.jpg",
            "Leo": "https://astrobackyard.com/wp-content/uploads/2021/10/leo-constellation.jpg",
            "Leo Minor": "https://storage.noirlab.edu/media/archives/images/screen/leo-minor-ann.jpg",
            "Lepus": "https://www.shutterstock.com/image-illustration/Lepus-88-constellations-astronomy-series-260nw-1903370647.jpg",
            "Libra": "https://www.shutterstock.com/image-illustration/Libra-88-constellations-astronomy-series-260nw-1903373368.jpg",
            "Lupus": "https://www.shutterstock.com/image-illustration/Lupus-88-constellations-astronomy-series-260nw-1903346812.jpg",
            "Lynx": "https://www.shutterstock.com/image-illustration/Lynx-88-constellations-astronomy-series-260nw-1903358881.jpg",
            "Lyra": "https://www.shutterstock.com/image-illustration/Lyra-88-constellations-astronomy-series-260nw-1903333147.jpg",
            "Mensa": "https://www.shutterstock.com/image-illustration/Mensa-88-constellations-astronomy-series-260nw-1903371499.jpg",
            "Microscopium": "https://img.freepik.com/premium-vector/microscopium-constellation-against-starry-night-sky_669341-5508.jpg",
            "Monoceros": "https://www.shutterstock.com/image-illustration/Monoceros-88-constellations-astronomy-series-260nw-1903366687.jpg",
            "Musca": "https://www.shutterstock.com/image-illustration/Musca-88-constellations-astronomy-260nw-1903347313.jpg",
            "Norma": "https://www.shutterstock.com/image-illustration/Norma-88-constellations-astronomy-series-260nw-1903333594.jpg",
            "Octans": "https://www.shutterstock.com/image-illustration/Octans-88-constellations-astronomy-series-260nw-1903186072.jpg",
            "Ophiuchus": "https://www.shutterstock.com/image-illustration/Ophiuchus-88-constellations-astronomy-series-260nw-1903334602.jpg",
            "Orion": "https://www.shutterstock.com/image-illustration/Orion-88-constellations-astronomy-series-260nw-1902606076.jpg",
            "Pavo": "https://www.shutterstock.com/image-illustration/Pavo-88-constellations-astronomy-series-260nw-1903326763.jpg",
            "Pegasus": "https://www.shutterstock.com/image-illustration/Pegasus-88-constellations-astronomy-series-260nw-380331583.jpg",
            "Perseus": "https://www.shutterstock.com/image-illustration/Perseus-88-constellations-astronomy-series-260nw-1903327093.jpg",
            "Phoenix": "https://www.shutterstock.com/image-illustration/Phoenix-88-constellations-astronomy-series-260nw-1903026178.jpg",
            "Pictor": "https://www.shutterstock.com/image-illustration/Pictor-88-constellations-astronomy-series-260nw-1903366075.jpg",
            "Pisces": "https://www.shutterstock.com/image-illustration/Pisces-88-constellations-astronomy-series-260nw-1903372174.jpg",
            "Piscis Austrinus": "https://storage.noirlab.edu/media/archives/images/screen/piscis-austrinus-ann.jpg",
            "Puppis": "https://www.shutterstock.com/image-illustration/Puppis-88-constellations-astronomy-series-260nw-1903360285.jpg",
            "Pyxis": "https://www.shutterstock.com/image-illustration/Pyxis-88-constellations-astronomy-series-260nw-1903361290.jpg",
            "Reticulum": "https://www.shutterstock.com/image-illustration/Reticulum-88-constellations-astronomy-series-260nw-1903370878.jpg",
            "Sagitta": "https://www.shutterstock.com/image-illustration/Sagitta-88-constellations-astronomy-series-260nw-1903187704.jpg",
            "Sagittarius": "https://www.shutterstock.com/image-illustration/Sagittarius-88-constellations-astronomy-series-260nw-1903374280.jpg",
            "Scorpius": "https://www.shutterstock.com/image-illustration/Scorpius-88-constellations-astronomy-series-260nw-1903372999.jpg",
            "Sculptor": "https://starregistration.net/media/wysiwyg/Constellations/Sculptor.png",
            "Scutum": "https://www.shutterstock.com/image-illustration/Scutum-88-constellations-astronomy-series-260nw-1903330564.jpg",
            "Serpens": "https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/blogs/1289/images/c41caae-64d8-dc26-853b-5e631115d21d_Screen_Shot_2024-02-25_at_11.34.32_AM.png",
            "Sextans": "https://www.shutterstock.com/image-illustration/Sextans-88-constellations-astronomy-series-260nw-1903352854.jpg",
            "Taurus": "https://www.shutterstock.com/image-illustration/Taurus-88-constellations-astronomy-series-260nw-1903373542.jpg",
            "Telescopium": "https://www.shutterstock.com/image-illustration/Telescopium-88-constellations-astronomy-series-260nw-1903330333.jpg",
            "Triangulum": "https://www.star-registration.com/cdn/shop/articles/12_Dreieck_1200x1200.jpg?v=1680509879",
            "Triangulum Australe": "https://www.go-astronomy.com/images/constellations/Triangulum%20Australe.jpg",
            "Tucana": "https://www.shutterstock.com/image-illustration/Tucana-88-constellations-astronomy-series-260nw-1903025500.jpg",
            "Ursa Major": "https://www.star-registration.com/cdn/shop/articles/24_Grosser-Baer_1200x1200.jpg?v=1681115996",
            "Ursa Minor": "https://www.star-registration.com/cdn/shop/articles/36_Kleiner-Baer_1200x1200.jpg?v=1681400432",
            "Vela": "https://www.shutterstock.com/image-illustration/Vela-88-constellations-astronomy-series-260nw-1903362637.jpg",
            "Virgo": "https://www.shutterstock.com/image-illustration/Virgo-88-constellations-astronomy-series-260nw-337946705.jpg",
            "Volans": "https://www.shutterstock.com/image-illustration/Volans-88-constellations-astronomy-series-260nw-1903358350.jpg",
            "Vulpecula": "https://www.shutterstock.com/image-illustration/Vulpecula-88-constellations-astronomy-series-260nw-1903187311.jpg"
        };

        // 별자리 데이터에 이미지 URL 업데이트 (기존과 동일)
        constellations.forEach(constellation => {
            const englishNameMatch = constellation.name.match(/\((.*?)\)/);
            if (englishNameMatch && englishNameMatch[1]) {
                const englishName = englishNameMatch[1];
                if (imageUrlMap[englishName]) {
                    constellation.imageUrl = imageUrlMap[englishName];
                }
            }
        });

        // 별자리를 한글 이름 기준으로 가나다 순서로 정렬 (타임어택 버튼용)
        const constellationsSortedKorean = [...constellations].sort((a, b) => {
            const koreanNameA = a.name.split(' (')[0];
            const koreanNameB = b.name.split(' (')[0];
            return koreanNameA.localeCompare(koreanNameB, 'ko');
        });

        // 별자리를 영어 이름 기준으로 알파벳 순서로 정렬 (학습 모드 목록용)
        const constellationsSortedEnglish = [...constellations].sort((a, b) => {
            const englishNameA = a.name.substring(a.name.indexOf('(') + 1, a.name.indexOf(')')).toLowerCase();
            const englishNameB = b.name.substring(b.name.indexOf('(') + 1, b.name.indexOf(')')).toLowerCase();
            if (englishNameA < englishNameB) return -1;
            if (englishNameA > englishNameB) return 1;
            return 0;
        });


        // --- 전역 변수 ---
        let currentMode = null;
        let currentLearnConstellationIndex = 0;
        let currentQuizConstellation = null;
        let quizCorrectAnswers = 0;
        let quizTotalQuestions = 0;
        let quizGameActive = false;
        let timeAttackActive = false;
        let timeAttackStartTime;
        let timeAttackTimerInterval;
        let timeAttackIncorrectAnswers = 0;
        let timeAttackSolvedCount = 0;
        let timeAttackCurrentQuestionConstellation = null;
        let timeAttackShuffledQuestions = []; // 실제 게임에 사용될 문제 목록 (난이도에 따라 달라짐)
        let timeAttackChallengeCount = 0; // 현재 타임어택의 총 문제 수
        let timeAttackCurrentQuestionIndex = 0;
        let timeAttackButtonElements = {};
        let timeAttackSelectedDifficulty = 8; // 기본값 Easy
        let timeAttackSelectedLanguage = 'ko'; // 기본값 Korean
        
        // 북마크와 진행률 관련 변수 추가
        let bookmarkedConstellations = JSON.parse(localStorage.getItem('bookmarkedConstellations') || '[]');
        let learnedConstellations = JSON.parse(localStorage.getItem('learnedConstellations') || '[]');

        // --- DOM 요소 가져오기 ---
        const modeSelectionElement = document.getElementById('mode-selection');
        const learnModeButton = document.getElementById('learn-mode-button');
        const quizModeButton = document.getElementById('quiz-mode-button');
        const timeAttackModeButton = document.getElementById('time-attack-mode-button');
        const bookmarkViewButton = document.getElementById('bookmark-view-button');
        const progressBar = document.getElementById('progress-bar');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const searchContainer = document.getElementById('search-container');
        const searchInput = document.getElementById('search-input');

        const constellationNameElement = document.getElementById('constellation-name');
        const constellationListGridElement = document.getElementById('constellation-list-grid');
        const descriptionElement = document.getElementById('description');
        const imageContainerElement = document.getElementById('image-container');

        const optionsElement = document.getElementById('options');
        const navButtonsElement = document.getElementById('nav-buttons');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const bookmarkButton = document.getElementById('bookmark-button');
        const nextQuizButton = document.getElementById('next-quiz-button');
        const feedbackElement = document.getElementById('feedback');
        const scoreDisplayElement = document.getElementById('current-score');
        const scoreContainerElement = document.getElementById('score');

        const timeAttackContainerElement = document.getElementById('time-attack-container');
        const timeAttackOptionsElement = document.getElementById('time-attack-options'); // 옵션 영역
        const startTimeAttackGameButton = document.getElementById('start-time-attack-game-button');
        const timeAttackGameAreaElement = document.getElementById('time-attack-game-area'); // 게임 진행 영역
        const timeAttackStatsElement = document.getElementById('time-attack-stats');
        const timeAttackTimerElement = document.getElementById('time-attack-timer');
        const timeAttackErrorsElement = document.getElementById('time-attack-errors');
        const timeAttackRemainingElement = document.getElementById('time-attack-remaining'); // 남은 개수 표시 span
        const timeAttackGridElement = document.getElementById('time-attack-grid');
        const timeAttackResultsElement = document.getElementById('time-attack-results');

        // --- 헬퍼 함수 ---
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
        }

        // --- UI 업데이트 함수 ---
        function updateUIForMode(mode) {
            currentMode = mode;
            // 모든 게임 관련 요소 숨기기
            constellationNameElement.classList.add('hidden');
            constellationListGridElement.classList.add('hidden');
            imageContainerElement.classList.add('hidden');
            navButtonsElement.classList.add('hidden');
            optionsElement.classList.add('hidden');
            nextQuizButton.classList.add('hidden');
            feedbackElement.classList.add('hidden');
            scoreContainerElement.classList.add('hidden');
            timeAttackContainerElement.classList.add('hidden'); // 타임어택 전체 컨테이너 숨김
            timeAttackOptionsElement.classList.add('hidden'); // 옵션 숨김
            startTimeAttackGameButton.classList.add('hidden'); // 시작 버튼 숨김
            timeAttackGameAreaElement.classList.add('hidden'); // 게임 진행 영역 숨김
            timeAttackResultsElement.classList.add('hidden'); // 결과 숨김
            descriptionElement.classList.remove('hidden');

            learnModeButton.classList.remove('selected');
            quizModeButton.classList.remove('selected');
            timeAttackModeButton.classList.remove('selected');
            bookmarkViewButton.classList.remove('selected');
            searchContainer.classList.add('hidden');
            progressBar.classList.add('hidden');

            if (mode === 'learn') {
                constellationNameElement.classList.remove('hidden');
                constellationListGridElement.classList.remove('hidden');
                imageContainerElement.classList.remove('hidden');
                learnModeButton.classList.add('selected');
                descriptionElement.innerHTML = '별자리를 선택하여 학습 내용을 확인하세요.';
                imageContainerElement.innerHTML = '';
                searchContainer.classList.remove('hidden');
                progressBar.classList.remove('hidden');
                updateProgressBar();
            } else if (mode === 'quiz') {
                optionsElement.classList.remove('hidden');
                feedbackElement.classList.remove('hidden');
                scoreContainerElement.classList.remove('hidden');
                quizModeButton.classList.add('selected');
                progressBar.classList.remove('hidden');
                updateProgressBar();
            } else if (mode === 'timeAttack') {
                timeAttackContainerElement.classList.remove('hidden'); // 타임어택 컨테이너 표시
                timeAttackOptionsElement.classList.remove('hidden'); // 옵션 표시
                startTimeAttackGameButton.classList.remove('hidden'); // 시작 버튼 표시
                timeAttackModeButton.classList.add('selected');
                descriptionElement.innerHTML = '타임어택 설정을 선택하고 시작 버튼을 눌러주세요.<br><br>'+ // 안내 메시지 변경
                                               '설명을 읽고 알맞은 별자리 버튼을 클릭하세요. 버튼이 초록으로 변할 때의 짜릿함을 느껴보세요! 모든 버튼의 색이 초록으로 바뀌면 완벽 클리어! 이제 당신만의 기록을 세워보세요.' ;
            } else {
                descriptionElement.innerHTML = '원하는 모드를 선택하세요!';
            }
        }

        // --- 학습 모드 함수 ---
        function startLearnMode() {
            updateUIForMode('learn');
            displayConstellationGridForLearning();
            constellationNameElement.textContent = '';
            descriptionElement.innerHTML = '위 목록에서 별자리를 선택하여 학습 내용을 확인하세요.';
            imageContainerElement.innerHTML = '';
        }

        function displayConstellationGridForLearning() {
            constellationListGridElement.innerHTML = '';
            constellationsSortedEnglish.forEach((constellation, index) => {
                const item = document.createElement('div');
                item.classList.add('constellation-list-item');
                const nameParts = constellation.name.split(' (');
                const koreanName = nameParts[0];
                const englishName = nameParts[1] ? nameParts[1].replace(')', '') : '';
                item.innerHTML = `${englishName}<br><small>${koreanName}</small>`;
                item.addEventListener('click', () => {
                    playSound('click');
                    showLearningDetails(index);
                });
                constellationListGridElement.appendChild(item);
            });
        }

        function showLearningDetails(index) {
            if (currentMode !== 'learn' || index < 0 || index >= constellationsSortedEnglish.length) return;
            currentLearnConstellationIndex = index;
            const constellation = constellationsSortedEnglish[index];
            constellationNameElement.textContent = constellation.name;

            let learnDescriptionHTML = ``;
            if (constellation.season) learnDescriptionHTML += `<strong>계절:</strong> ${constellation.season}<br>`;
            if (constellation.location) learnDescriptionHTML += `<strong>위치:</strong> ${constellation.location}<br>`;
            if (constellation.story) learnDescriptionHTML += `<strong>이야기:</strong> ${constellation.story}<br>`;
            if (constellation.characteristics) learnDescriptionHTML += `<strong>특징:</strong> ${constellation.characteristics}<br>`;
            descriptionElement.innerHTML = learnDescriptionHTML || '추가 정보가 없습니다.';

            imageContainerElement.innerHTML = '';
            if (constellation.imageUrl) {
                const img = document.createElement('img');
                img.src = constellation.imageUrl;
                img.alt = `${constellation.name} 이미지`;
                img.classList.add('constellation-image');
                img.onerror = function() {
                    imageContainerElement.innerHTML = '<p class="text-sm text-gray-400">이미지를 불러오는데 실패했습니다.</p>';
                };
                imageContainerElement.appendChild(img);
            } else {
                imageContainerElement.innerHTML = '<p class="text-sm text-gray-400">이미지 준비 중...</p>';
            }
            
            // 네비게이션 버튼 표시 및 북마크 버튼 업데이트
            navButtonsElement.classList.remove('hidden');
            updateBookmarkButton();
            markConstellationAsLearned(index);
        }

        // --- 퀴즈 모드 함수 ---
        function startQuizMode() {
            updateUIForMode('quiz');
            quizCorrectAnswers = 0;
            quizTotalQuestions = 0;
            scoreDisplayElement.textContent = `${quizCorrectAnswers} / ${quizTotalQuestions}`;
            quizGameActive = true;
            nextQuizRound();
        }

        function nextQuizRound() {
            if (!quizGameActive) return;
            feedbackElement.textContent = '';
            feedbackElement.classList.remove('correct', 'incorrect');
            nextQuizButton.classList.add('hidden');

            const randomIndex = Math.floor(Math.random() * constellations.length);
            currentQuizConstellation = constellations[randomIndex];
            descriptionElement.innerHTML = `<strong>다음 별자리에 대한 설명입니다:</strong><br>${currentQuizConstellation.description}`;
            imageContainerElement.classList.add('hidden');
            generateQuizOptions();
        }

        function generateQuizOptions() {
            optionsElement.innerHTML = '';
            const correctOption = currentQuizConstellation.name;
            const options = [correctOption];

            while (options.length < 4) {
                const randomConstellation = constellations[Math.floor(Math.random() * constellations.length)];
                if (!options.includes(randomConstellation.name)) {
                    options.push(randomConstellation.name);
                }
            }
            shuffleArray(options).forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-button');
                button.addEventListener('click', () => handleQuizAnswer(option));
                optionsElement.appendChild(button);
            });
        }

        function handleQuizAnswer(selectedOption) {
            if (!quizGameActive) return;
            Array.from(optionsElement.children).forEach(button => button.disabled = true);

            quizTotalQuestions++;

            if (selectedOption === currentQuizConstellation.name) {
                feedbackElement.textContent = '정답입니다!';
                feedbackElement.classList.add('correct');
                quizCorrectAnswers++;
                playSound('correct');
            } else {
                feedbackElement.textContent = `틀렸습니다! 정답은 ${currentQuizConstellation.name} 입니다.`;
                feedbackElement.classList.add('incorrect');
                playSound('incorrect');
            }
            scoreDisplayElement.textContent = `${quizCorrectAnswers} / ${quizTotalQuestions}`;
            nextQuizButton.classList.remove('hidden');
        }

        // --- 타임어택 모드 함수 ---
        function enterTimeAttackMode() {
            updateUIForMode('timeAttack'); // 옵션 선택 화면 표시
        }

        function initiateTimeAttackGame() {
            // 선택된 옵션 가져오기
            timeAttackSelectedDifficulty = parseInt(document.querySelector('input[name="difficulty"]:checked').value);
            timeAttackSelectedLanguage = document.querySelector('input[name="language"]:checked').value;

            timeAttackOptionsElement.classList.add('hidden'); // 옵션 숨기기
            startTimeAttackGameButton.classList.add('hidden'); // 시작 버튼 숨기기
            timeAttackGameAreaElement.classList.remove('hidden'); // 게임 영역 표시

            timeAttackActive = true;
            timeAttackIncorrectAnswers = 0;
            timeAttackSolvedCount = 0;
            timeAttackCurrentQuestionIndex = 0;
            timeAttackChallengeCount = timeAttackSelectedDifficulty; // 선택된 문제 수 설정

            // 난이도에 따라 문제 목록 생성 (원본 배열 복사 후 섞고 자르기)
            timeAttackShuffledQuestions = shuffleArray([...constellations]).slice(0, timeAttackChallengeCount);

            timeAttackButtonElements = {}; // 버튼 요소 초기화

            timeAttackErrorsElement.textContent = timeAttackIncorrectAnswers;
            timeAttackTimerElement.textContent = '00:00';
            timeAttackRemainingElement.textContent = timeAttackChallengeCount; // 남은 개수 초기화
            timeAttackResultsElement.classList.add('hidden'); // 결과 숨기기

            displayTimeAttackGrid(); // 그리드 버튼 생성 (선택된 난이도/언어 반영)
            displayNextTimeAttackQuestion(); // 첫 문제 제시

            timeAttackStartTime = Date.now();
            if (timeAttackTimerInterval) clearInterval(timeAttackTimerInterval);
            timeAttackTimerInterval = setInterval(updateTimeAttackTimer, 1000);
        }


        function displayTimeAttackGrid() {
            timeAttackGridElement.innerHTML = '';
            // 선택된 난이도에 해당하는 별자리 목록 가져오기 (버튼 표시는 정렬된 목록 기준)
            let constellationsForGrid;
            // 버튼 정렬 기준 결정 (선택된 언어에 따라)
            const sortKey = timeAttackSelectedLanguage === 'ko' ? 'koreanName' : 'englishName';
            const sortedConstellations = [...timeAttackShuffledQuestions].sort((a, b) => {
                const nameA = sortKey === 'ko' ? a.name.split(' (')[0] : a.name.substring(a.name.indexOf('(') + 1, a.name.indexOf(')')).toLowerCase();
                const nameB = sortKey === 'ko' ? b.name.split(' (')[0] : b.name.substring(b.name.indexOf('(') + 1, b.name.indexOf(')')).toLowerCase();
                return sortKey === 'ko' ? nameA.localeCompare(nameB, 'ko') : nameA.localeCompare(nameB);
            });

            constellationsForGrid = sortedConstellations;


            // 그리드 열 개수 동적 설정 (가로로 최대한 많이 보이도록)
            const gridCols = Math.ceil(Math.sqrt(timeAttackChallengeCount)); // 제곱근 기준으로 열 개수 계산 (조정 가능)
            timeAttackGridElement.style.gridTemplateColumns = `repeat(${Math.min(gridCols, 4)}, 1fr)`; // 최대 11열

            constellationsForGrid.forEach(constellation => {
                const button = document.createElement('button');
                button.classList.add('time-attack-button');

                // 선택된 언어에 따라 버튼 텍스트 설정
                if (timeAttackSelectedLanguage === 'ko') {
                    button.textContent = constellation.name.split(' (')[0]; // 한글 이름
                } else {
                    const englishNameMatch = constellation.name.match(/\((.*?)\)/);
                    button.textContent = englishNameMatch ? englishNameMatch[1] : constellation.name.split(' (')[0]; // 영어 이름 (없으면 한글)
                }

                button.dataset.constellationName = constellation.name; // 데이터 속성에는 항상 전체 이름 저장
                button.addEventListener('click', handleTimeAttackAnswer);
                button.classList.remove('solved');
                button.disabled = false;
                timeAttackGridElement.appendChild(button);
                timeAttackButtonElements[constellation.name] = button;
            });
        }

        function displayNextTimeAttackQuestion() {
             // 남은 개수 업데이트
            timeAttackRemainingElement.textContent = timeAttackChallengeCount - timeAttackSolvedCount;

            if (timeAttackSolvedCount === timeAttackChallengeCount) { // 현재 챌린지 개수와 비교
                endTimeAttackMode();
                return;
            }

            let foundNextQuestion = false;
            // timeAttackShuffledQuestions 배열 (현재 게임 문제 목록) 에서 다음 문제 찾기
            while(timeAttackCurrentQuestionIndex < timeAttackShuffledQuestions.length) {
                const potentialQuestion = timeAttackShuffledQuestions[timeAttackCurrentQuestionIndex];
                 // 해당 별자리 버튼이 존재하는지, 그리고 solved 상태가 아닌지 확인
                if (timeAttackButtonElements[potentialQuestion.name] && !timeAttackButtonElements[potentialQuestion.name].classList.contains('solved')) {
                    timeAttackCurrentQuestionConstellation = potentialQuestion;
                    foundNextQuestion = true;
                    break;
                }
                timeAttackCurrentQuestionIndex++;
            }

            if (!foundNextQuestion) {
                // 섞인 목록을 다 돌았는데도 풀리지 않은 문제가 있다면 (오류 대비)
                 // 현재 게임 목록(timeAttackShuffledQuestions)에서 첫 번째 미해결 문제를 찾음
                const firstUnsolved = timeAttackShuffledQuestions.find(c => timeAttackButtonElements[c.name] && !timeAttackButtonElements[c.name].classList.contains('solved'));
                if(firstUnsolved){
                    timeAttackCurrentQuestionConstellation = firstUnsolved;
                } else {
                    endTimeAttackMode(); // 모든 문제가 풀렸다면 게임 종료
                    return;
                }
            }

            descriptionElement.innerHTML = `<strong>다음 별자리를 찾으세요:</strong><br>${timeAttackCurrentQuestionConstellation.description}`;
        }


        function handleTimeAttackAnswer(event) {
            if (!timeAttackActive) return;

            const clickedButton = event.target;
            const clickedConstellationName = clickedButton.dataset.constellationName;

            if (clickedButton.classList.contains('solved')) {
                return;
            }

            if (clickedConstellationName === timeAttackCurrentQuestionConstellation.name) {
                clickedButton.classList.add('solved');
                clickedButton.disabled = true;
                timeAttackSolvedCount++;
                playSound('correct');

                 // 남은 개수 즉시 업데이트
                timeAttackRemainingElement.textContent = timeAttackChallengeCount - timeAttackSolvedCount;

                if (timeAttackSolvedCount === timeAttackChallengeCount) { // 현재 챌린지 개수와 비교
                    endTimeAttackMode();
                } else {
                    // 다음 문제 제시 (인덱스 증가 불필요)
                    displayNextTimeAttackQuestion();
                }
            } else {
                timeAttackIncorrectAnswers++;
                timeAttackErrorsElement.textContent = timeAttackIncorrectAnswers;
                playSound('incorrect');
                // 오답 시각적 피드백
                clickedButton.style.transform = 'translateX(-3px)';
                setTimeout(() => {
                    clickedButton.style.transform = 'translateX(3px)';
                    setTimeout(() => {
                        clickedButton.style.transform = 'translateX(0px)';
                    }, 50);
                }, 50);
            }
        }

        function updateTimeAttackTimer() {
            if (!timeAttackActive) return;
            const elapsedTime = (Date.now() - timeAttackStartTime) / 1000;
            timeAttackTimerElement.textContent = formatTime(elapsedTime);
        }

        function endTimeAttackMode() {
            timeAttackActive = false;
            clearInterval(timeAttackTimerInterval);
            const totalTimeSeconds = (Date.now() - timeAttackStartTime) / 1000;
            
            playSound('complete');

            descriptionElement.innerHTML = "타임어택 게임 종료!";
            timeAttackGameAreaElement.classList.add('hidden'); // 게임 영역 숨기기

            timeAttackResultsElement.innerHTML = `
                <p><strong>최종 결과 (${timeAttackChallengeCount}개 챌린지)</strong></p>
                <p>총 걸린 시간: ${formatTime(totalTimeSeconds)}</p>
                <p>오답 횟수: ${timeAttackIncorrectAnswers}회</p>
                <button id="restart-time-attack-button" class="mode-button mt-4">옵션 선택으로 돌아가기</button>
            `;
            timeAttackResultsElement.classList.remove('hidden'); // 결과 표시
            // 다시 시작 버튼 클릭 시 옵션 선택 화면으로 돌아가도록 수정
            document.getElementById('restart-time-attack-button').addEventListener('click', enterTimeAttackMode);
        }
        
        // --- 북마크 및 진행률 관련 함수 추가 ---
        function updateBookmarkButton() {
            const constellation = constellationsSortedEnglish[currentLearnConstellationIndex];
            const englishName = constellation.name.substring(constellation.name.indexOf('(') + 1, constellation.name.indexOf(')'));
            
            if (bookmarkedConstellations.includes(englishName)) {
                bookmarkButton.textContent = '북마크 해제';
                bookmarkButton.style.backgroundColor = '#f56565';
            } else {
                bookmarkButton.textContent = '북마크';
                bookmarkButton.style.backgroundColor = '#4a5568';
            }
        }
        
        function toggleBookmark() {
            const constellation = constellationsSortedEnglish[currentLearnConstellationIndex];
            const englishName = constellation.name.substring(constellation.name.indexOf('(') + 1, constellation.name.indexOf(')'));
            
            if (bookmarkedConstellations.includes(englishName)) {
                bookmarkedConstellations = bookmarkedConstellations.filter(name => name !== englishName);
            } else {
                bookmarkedConstellations.push(englishName);
            }
            
            localStorage.setItem('bookmarkedConstellations', JSON.stringify(bookmarkedConstellations));
            updateBookmarkButton();
        }
        
        function markConstellationAsLearned(index) {
            const constellation = constellationsSortedEnglish[index];
            const englishName = constellation.name.substring(constellation.name.indexOf('(') + 1, constellation.name.indexOf(')'));
            
            if (!learnedConstellations.includes(englishName)) {
                learnedConstellations.push(englishName);
                localStorage.setItem('learnedConstellations', JSON.stringify(learnedConstellations));
                updateProgressBar();
            }
        }
        
        function updateProgressBar() {
            const progress = (learnedConstellations.length / 88) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${learnedConstellations.length} / 88`;
            
            if (currentMode === 'learn' || currentMode === 'quiz') {
                progressBar.classList.remove('hidden');
            }
        }
        
        function showBookmarkedConstellations() {
            currentMode = 'bookmark';
            updateUIForMode('learn'); // 학습 모드 UI 재사용
            
            // 모든 모드 버튼 선택 해제
            learnModeButton.classList.remove('selected');
            quizModeButton.classList.remove('selected');
            timeAttackModeButton.classList.remove('selected');
            bookmarkViewButton.classList.add('selected');
            
            constellationNameElement.textContent = '북마크한 별자리';
            descriptionElement.innerHTML = '북마크한 별자리를 선택하여 다시 학습하세요.';
            
            // 북마크한 별자리만 표시
            constellationListGridElement.innerHTML = '';
            constellationsSortedEnglish.forEach((constellation, index) => {
                const englishName = constellation.name.substring(constellation.name.indexOf('(') + 1, constellation.name.indexOf(')'));
                if (bookmarkedConstellations.includes(englishName)) {
                    const item = document.createElement('div');
                    item.classList.add('constellation-list-item');
                    const nameParts = constellation.name.split(' (');
                    const koreanName = nameParts[0];
                    item.innerHTML = `${englishName}<br><small>${koreanName}</small>`;
                    item.addEventListener('click', () => {
                        playSound('click');
                        currentMode = 'learn'; // 일시적으로 learn 모드로 전환
                        showLearningDetails(index);
                        currentMode = 'bookmark'; // 다시 bookmark 모드로
                    });
                    constellationListGridElement.appendChild(item);
                }
            });
            
            if (bookmarkedConstellations.length === 0) {
                constellationListGridElement.innerHTML = '<p class="text-gray-400">북마크한 별자리가 없습니다.</p>';
            }
        }
        
        // 검색 기능 추가
        function setupSearch() {
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                if (currentMode === 'learn' || currentMode === 'bookmark') {
                    filterConstellationGrid(searchTerm);
                }
            });
        }
        
        function filterConstellationGrid(searchTerm) {
            const items = constellationListGridElement.querySelectorAll('.constellation-list-item');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        // 이전/다음 버튼 이벤트 핸들러
        function navigateLearning(direction) {
            if (currentMode !== 'learn') return;
            
            if (direction === 'prev') {
                currentLearnConstellationIndex--;
                if (currentLearnConstellationIndex < 0) {
                    currentLearnConstellationIndex = constellationsSortedEnglish.length - 1;
                }
            } else {
                currentLearnConstellationIndex++;
                if (currentLearnConstellationIndex >= constellationsSortedEnglish.length) {
                    currentLearnConstellationIndex = 0;
                }
            }
            
            showLearningDetails(currentLearnConstellationIndex);
        }


        // --- 이벤트 리스너 연결 ---
        learnModeButton.addEventListener('click', startLearnMode);
        quizModeButton.addEventListener('click', startQuizMode);
        timeAttackModeButton.addEventListener('click', enterTimeAttackMode);
        bookmarkViewButton.addEventListener('click', showBookmarkedConstellations);
        startTimeAttackGameButton.addEventListener('click', initiateTimeAttackGame);

        nextQuizButton.addEventListener('click', nextQuizRound);
        
        // 네비게이션 버튼 이벤트
        prevButton.addEventListener('click', () => navigateLearning('prev'));
        nextButton.addEventListener('click', () => navigateLearning('next'));
        bookmarkButton.addEventListener('click', toggleBookmark);

        // 페이지 로드 시 초기 상태 설정
        window.onload = function() {
            updateUIForMode(null);
            setupSearch();
            updateProgressBar();
        };

    </script>
</body>
</html>
